(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"+3Pf":function(e,t,n){(t=e.exports=n("I1BE")(!1)).push([e.i,"._2k9QxMzNFjSLxe4cLhx7uH {\n    margin-left: 10px;\n}\n._2k9QxMzNFjSLxe4cLhx7uH._2pt5dl-VzLueHh_pBgqDF7 {\n    margin-left: 20px;\n    padding-bottom: 0;\n    padding-right: 0;\n}\n._33n9OKDfuHLhO7Fhe_OaUM {\n    position: relative;\n    box-sizing: border-box;\n    width: 100%;\n    margin-left: -10px;\n    padding: 10px 0 0 10px;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n._33n9OKDfuHLhO7Fhe_OaUM:last-child {\n    padding-bottom: 10px;\n}\n._2pt5dl-VzLueHh_pBgqDF7 ._33n9OKDfuHLhO7Fhe_OaUM::before,\n._2pt5dl-VzLueHh_pBgqDF7 ._33n9OKDfuHLhO7Fhe_OaUM::after {\n    content: '';\n    position: absolute;\n    left: 0;\n    border: solid #656565;\n    width: 9px;\n}\n._2pt5dl-VzLueHh_pBgqDF7 ._33n9OKDfuHLhO7Fhe_OaUM::before {\n    top: -10px;\n    height: 30px;\n    border-width: 0 0 1px 1px;\n}\n._2pt5dl-VzLueHh_pBgqDF7 ._33n9OKDfuHLhO7Fhe_OaUM:first-child:before {\n    height: 20px;\n    top: 0;\n}\n._2pt5dl-VzLueHh_pBgqDF7 ._33n9OKDfuHLhO7Fhe_OaUM::after {\n    top: 20px;\n    height: 10px;\n    border-width: 0 0 0 1px;\n}\n._2pt5dl-VzLueHh_pBgqDF7 ._33n9OKDfuHLhO7Fhe_OaUM:last-child {\n    padding-bottom: 0;\n}\n._2pt5dl-VzLueHh_pBgqDF7 ._33n9OKDfuHLhO7Fhe_OaUM:last-child:after {\n    border-width: 0;\n}\n._2aqLcWA7brJ-w6mo0D4hce {\n    vertical-align: middle;\n}\n._2aqLcWA7brJ-w6mo0D4hce {\n    padding-left: 10px;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n}\n",""]),t.locals={outlineList:"_2k9QxMzNFjSLxe4cLhx7uH",__inner:"_2pt5dl-VzLueHh_pBgqDF7",outlineListItem:"_33n9OKDfuHLhO7Fhe_OaUM",outlineLabel:"_2aqLcWA7brJ-w6mo0D4hce"}},"/8iF":function(e,t,n){"use strict";n.r(t),n.d(t,"millimetersToPixels",(function(){return l})),n.d(t,"pageDimensionsFromFormat",(function(){return c}));var i=n("JPcv"),r=n("ulSj"),a=n.n(r),o=Object(i.fromJS)(a.a).map((function(e){return Object(i.fromJS)({width:96*e.get("width"),height:96*e.get("height")})}));function l(e){return Math.round(3.77952*e)}function c(e){return o.has(e)?o.get(e).toJS():null}},"/Wf7":function(e,t,n){var i=n("+3Pf");"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(i,r);i.locals&&(e.exports=i.locals)},"44p9":function(e,t,n){"use strict";n.r(t),function(e){var i=n("zdLb"),r=n("K6OD"),a=n("JSKl"),o=n("8H+l"),l=n("DiwI"),c=n("6nAx"),s=n("kn+Y"),u=function(){return{render:function(){return!0}}},f=i.default.extend({initialize:function(e){i.default.prototype.initialize.apply(this,[e]),this.ShareButtonView=u,this.EmbedButtonView=u,this.VideoView=r.default,this.ChartView=a.default,this.MediaVideoView=o.default,this.SlideshareView=l.default,this.MediaImageView=c.default,delete window.moveables}});e.extend(f.prototype,s.default),t.default=f}.call(this,n("LvDl"))},"5dG8":function(e,t,n){"use strict";n.r(t);var i=n("Jgc/"),r=n("JPcv"),a=n("Pp7T"),o=n.n(a),l=n("Zcty"),c=n("ySsV"),s=n("46Ur"),u=n("sCQ0"),f=n("bSnT"),d=n("/8iF");function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_(e);if(t){var r=_(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b={zoomRatio:1,paperZoomRatio:1,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,paperWidth:0,paperHeight:0,transformOriginX:0},O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(h,e);var t,n,i,a=v(h);function h(){return p(this,h),a.apply(this,arguments)}return t=h,(n=[{key:"getInitialState",value:function(){var e=c.default.get("width")||0;return Object(r.Map)({transform:!1,infographicWidth:e,infographicHeight:0,viewportWidth:0,activeType:f.DEFAULT_TYPE,printFormat:"default",pageOrientation:u.default.DEFAULT_PAGE_ORIENTATION}).merge(b)}},{key:"reduce",value:function(e,t){switch(t.type){case u.default.DOWNLOAD_VIEW_LOADED:l.default.waitFor([c.default.getDispatchToken()]);var n=c.default.get("width");return e.set("infographicWidth",n);case u.default.UNLOAD_INFOGRAPHIC:return this.getInitialState().set("infographicWidth",0);case u.default.SET_VIEWPORT_SIZE:var i=e.set("viewportWidth",t.width);return this._calculateZoom(i);case u.default.SETTINGS_LOADED:l.default.waitFor([s.default.getDispatchToken()]);var r=Object(d.millimetersToPixels)(u.default.DEFAULT_MARGIN_MILLIMETERS);return this._calculateZoom(e.merge({activeType:s.default.activeTab,printFormat:"default",pageOrientation:u.default.DEFAULT_PAGE_ORIENTATION,marginTop:r,marginRight:r,marginBottom:r,marginLeft:r}));case u.default.CHANGE_TAB:var a=t.id;return e.merge({printFormat:"default",activeType:a});case u.default.RESPONSIVE_INFOGRAPHIC_HEIGHT:var o=t.height;return this._calculateZoom(e.set("infographicHeight",o))}return e}},{key:"_calculateZoom",value:function(e){var t=e.get("printFormat");if("default"===t)return e.merge(b);var n=Object(d.pageDimensionsFromFormat)(t);o()(!!n,"Dimensions for format %s are not defined",t);var i={};"portrait"===e.get("pageOrientation")?(i.paperWidth=n.width,i.paperHeight=n.height):(i.paperWidth=n.height,i.paperHeight=n.width);var r=i.paperWidth,a=i.paperHeight,l=e.get("marginLeft"),c=e.get("marginRight"),s=a-e.get("marginTop")-e.get("marginBottom"),u=(r-l-c)/e.get("infographicWidth"),f=s/e.get("infographicHeight");i.zoomRatio=Math.min(u,f,1),i.zoomRatio<1&&i.zoomRatio===f&&(i.transformOriginX=(2*l+r-c)/2);var h=e.get("viewportWidth");return i.paperZoomRatio=1,r>h&&(i.paperZoomRatio=h/r),e.merge(i)}},{key:"zoomRatio",get:function(){return this.getState().get("zoomRatio")}},{key:"paperZoomRatio",get:function(){return this.getState().get("paperZoomRatio")}},{key:"displayPaper",get:function(){var e=this.getState();return e.get("activeType")===f.default.TYPE_PRINT&&"default"!==e.get("printFormat")}},{key:"paperWidth",get:function(){return this.getState().get("paperWidth")}},{key:"paperHeight",get:function(){return this.getState().get("paperHeight")}},{key:"transformOriginX",get:function(){return this.getState().get("transformOriginX")}},{key:"marginTop",get:function(){return this.getState().get("marginTop")}},{key:"marginRight",get:function(){return this.getState().get("marginRight")}},{key:"marginBottom",get:function(){return this.getState().get("marginBottom")}},{key:"marginLeft",get:function(){return this.getState().get("marginLeft")}}])&&m(t.prototype,n),i&&m(t,i),h}(i.ReduceStore);t.default=new O(l.default)},"80VO":function(e,t,n){var i=n("wQZe");"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(i,r);i.locals&&(e.exports=i.locals)},"8H+l":function(e,t,n){"use strict";n.r(t),function(e){var i=n("OHxV"),r=n("NW2p"),a=n("Du7+");t.default=r.default.extend({template:i.default,render:function(){if(r.default.prototype.render.apply(this),"vimeo"===this.model.get("media_type")){var t=this.$(".video"),n=this.model.get("shrink"),i=e(".ig-items").width();if(n){var o=a.default.getMargin();i=(e(".ig-items").width()-o)/2}t.height(.75*i)}return this}})}.call(this,n("+hRF"))},BlEU:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return a}));var i=n("Zcty"),r=n("sCQ0");function a(e){i.default.dispatch({type:r.default.RESPONSIVE_INFOGRAPHIC_HEIGHT,height:e})}},CKCE:function(e,t,n){"use strict";n.r(t),t.default='<table>\n  <tr>\n    <td style="vertical-align: top; padding-top: 3px;">\n      <img src="/i/video.svg" style="width: 51px;">\n    </td>\n    <td style="vertical-align: middle !important;">\n      <div class="bodytext" style="float: left; margin-left: 20px;">\n        <div class="inner"><%= url %></div>\n      </div>\n    </td>\n  </tr>\n</table>\n'},JSKl:function(e,t,n){"use strict";n.r(t),function(e,i){var r=n("iqBm"),a=n("Izd2"),o=n("h7h9"),l=n("avtj"),c=n("JTIy"),s=n("SvMf"),u=n("73IX"),f=n("pWQL");t.default=l.default.extend({template:r.default,className:"chartcontainer",initialize:function(t){var n=this;l.default.prototype.initialize.apply(this,[t]);var i=this.model.getTypeMod(),r=this.getData(),a=Object(u.default)(i,this.model.get("custom")),o=this.model.get("sheetnames")||[],d=!0===a.switchRowsColumns;this.showTitles=!0,this.animate="gif"===e.get(this,"parent.options.exportSettings.imageFormat"),"24_0"===i&&(this.animate=!1),this.charts_data=[],this.rendered=[];var h=[],p=[],m=this.options.renderSettings,g=this.model.get("object_id");p=s.default.readHiddenChildren(g);var v=this.options.showColumns||[];if(c.default.hasMultipleSheets({typeMod:i,custom:a,data:r})&&!a.useAllColumns)this.titles=[],r.forEach((function(e,t){var i=[e];(v.length&&-1===v.indexOf(t)||-1!==p.indexOf(t))&&h.push(t),n.titles[t]=n._createTitle(o[t]||(e[0]?e[0][0]:"Sheet "+t),t),n.charts_data.push(i)})),this.titles.length<2&&(this.showTitles=!1);else{this.titles=[];var y=r||[];this.groupedTitles=[],a.useAllColumns||(y=[r[0]]);var _=0;y.forEach((function(e,t){e.length?(n.groupedTitles[t]=d?e.slice(1).map((function(e){return n._createTitle(e[0],_++)})):e[0].slice(1).map((function(e){return n._createTitle(e,_++)})),n.titles=n.titles.concat(n.groupedTitles[t])):n.groupedTitles[t]=[]}));var b=t.parent.showObjects&&Object.keys(t.parent.showObjects).length;if(!this.titles.length||1===this.titles.length&&!b)this.showTitles=!1,this.charts_data.push(r);else{var O=0;y.forEach((function(t,i){d?n.groupedTitles[i].forEach((function(e,i){var r=[[t[0].slice(0),t[i+1].slice(0)]];n.charts_data.push(r),(v.length&&-1===v.indexOf(O)||-1!==p.indexOf(O))&&h.push(O),O++})):n.groupedTitles[i].forEach((function(i,r){var a=r+1,o=[[]];o[0]=e.map(t,(function(e){return[e[0],e[a]]})),n.charts_data.push(o),(v.length&&-1===v.indexOf(O)||-1!==p.indexOf(O))&&h.push(O),O++}))}))}[f.BAR_RACE,f.BAR_RACE_IMG].includes(i)&&(this.showTitles=!1)}if(m.displayEnabledChartsOnly&&h.length>0){var S=this.titles,w=S.length,E=this.charts_data;this.titles=[],this.charts_data=[];for(var L=0;L<w;L++)-1===h.indexOf(L)&&(this.titles.push(S[L]),this.charts_data.push(E[L]))}this.listenTo(this.model,"change:dataSets",this._updateVisibility)},_updateVisibility:function(){var e=this.model.get("dataSets"),t=this.$el.find(".moveable.chart"),n=this.$el.find(".moveable.particle");t.each(function(t,r){-1!==e.indexOf(t)?(i(r).removeClass("hidden"),i(n[t]).removeClass("hidden"),-1===this.rendered.indexOf(t)&&this.renderChart(t)):(i(r).addClass("hidden"),i(n[t]).addClass("hidden"))}.bind(this))},_createTitle:function(t,n){return e.get(t,"value")&&(t=t.value),{contents:t,sheetIndex:n}},initChart:function(){var e=this.titles.length;if(e>0)for(var t=0;t<e;t++)this.renderChart(t,this.titles[t].sheetIndex);else this.renderChart(0)},getData:function(){var e,t,n,i,r=this.model.get("custom"),a=(null===(e=this.options.liveData)||void 0===e?void 0:null===(t=e[null===(n=r.live)||void 0===n?void 0:n.key])||void 0===t?void 0:t.data)||this.model.get("data");if(null!=r&&null!==(i=r.live)&&void 0!==i&&i.enabled){var o,l=null==r?void 0:null===(o=r.live)||void 0===o?void 0:o.sheetSelected;if(l>-1)return[a[l]]}return a},renderChart:function(e,t){if(e=e||0,this.charts_data.length){var n=this.model,i=this.animate,r=this.infographic,l=this.options,c=r.get("theme"),s=this.getData(),u="".concat(n.get("chart_id"),"_").concat(e),f=document.getElementById("Chart_".concat(u));a.default.create({container:f,chart:n,theme:c,id:u,data:s,sheetIndex:t,animate:i,viewMode:l.viewMode,assets:l.assets}).then((function(e){Object(o.addEntity)(n.get("chart_id"),e)})),this.rendered.push(e)}},prepare:function(){var t=this.model.get("chart_id");this.el.id="CHART_"+t;var n={id:t,titles:this.titles,showTitles:this.showTitles,charts_data:this.charts_data};return e.template(this.template)(n)}})}.call(this,n("LvDl"),n("+hRF"))},K6OD:function(e,t,n){"use strict";n.r(t),function(e){var i=n("CKCE"),r=n("nVTQ");t.default=r.default.extend({template:i.default,render:function(){var t=this.model.get("text").split("/").pop(),n={};return/youtube/.test(this.model.get("text"))?n.url="//youtu.be/"+t:n.url="//vimeo.com/"+t,this.$el.css({"padding-bottom":0,height:"60px"}),this.$el.html(e.template(this.template)(n)),this}})}.call(this,n("LvDl"))},LTYX:function(e,t,n){"use strict";n.r(t),function(e){var i=n("sCQ0"),r=n("Zcty"),a=n("PVeW");var o={collectElements:function(e){r.default.dispatch({type:i.default.COLLECT_ELEMENTS,infographic:e})},setElementVisible:function(e,t){r.default.dispatch({type:i.default.SET_ELEMENT_VISIBLE,elementId:e,visible:t}),Object(a.default)()},setElementChildVisible:function(e,t,n){r.default.dispatch({type:i.default.SET_ELEMENT_CHILD_VISIBLE,elementId:e,index:parseInt(t),visible:n}),Object(a.default)()},toggleAllElementVisibility:function(e){r.default.dispatch({type:i.default.TOGGLE_ALL_ELEMENTS_VISIBLE,visible:e}),Object(a.default)()},revealSelectionFrame:function(e,t,n,a){r.default.dispatch({type:i.default.REVEAL_SELECTION_FRAME,objectId:e,objectType:t,childIndex:n,position:a})},hideSelectionFrame:function(){r.default.dispatch({type:i.default.HIDE_SELECTION_FRAME})},setScrollPosition:function(t){var n=e.extend({type:i.default.SET_SCROLL_POSITION},t);r.default.dispatch(n)}};t.default=o}.call(this,n("LvDl"))},OHxV:function(e,t,n){"use strict";n.r(t),t.default='<img src="<%= image %>" class="video">\n<% if (media_type === \'youtube\') { %>\n    <img src="/i/media/youtube_play.png" class="youtube-play-icon play-icon">\n<% } else if (media_type === \'vimeo\') { %>\n    <img src="/i/media/vimeo_play.png?2" class="vimeo-play-icon play-icon">\n<% } %>\n'},Wbv4:function(e,t,n){"use strict";n.r(t);var i=n("17x9"),r=n.n(i),a=n("q1tI"),o=n.n(a),l=n("TSYQ"),c=n.n(l),s=n("URb8"),u=n.n(s);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=v(e);if(t){var r=v(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(a,e);var t,n,i,r=m(a);function a(){var e;d(this,a);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=r.call.apply(r,[this].concat(n)))._handleMouseLeave=function(){e.props.onLeave&&e.props.onLeave()},e}return t=a,(n=[{key:"render",value:function(){var e,t,n,i=this.props.position;return(o.a.createElement("div",{className:c()(u.a.elementDecorator,this.props.className,(e={},t=u.a.__visible,n=this.props.visible,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e)),onMouseLeave:this._handleMouseLeave,style:i},this.props.children))}}])&&h(t.prototype,n),i&&h(t,i),a}(o.a.Component);y.displayName="SelectionFrame",y.propTypes={children:r.a.oneOfType([r.a.arrayOf(r.a.element),r.a.element]),onLeave:r.a.func,position:r.a.shape({top:r.a.number.isRequired,left:r.a.number.isRequired,width:r.a.number.isRequired,height:r.a.number.isRequired}).isRequired,visible:r.a.bool.isRequired,className:r.a.string},t.default=y},cBn6:function(e,t,n){"use strict";n.r(t),function(e){var i,r=n("q1tI"),a=n.n(r),o=n("JPcv"),l=n("/MKj"),c=n("TSYQ"),s=n.n(c),u=n("iOMl"),f=n("URb8"),d=n.n(f),h=n("80VO"),p=n.n(h),m=n("ySsV"),g=n("sMVN"),v=n("SvMf"),y=n("5dG8"),_=n("SsOH"),b=n("PFCD"),O=n("46Ur"),S=n("bSnT"),w=n("LTYX"),E=n("BlEU"),L=n("0GyG"),T=n("Zdat"),F=n("r87f"),C=n("Wbv4"),x=n("44p9"),k=n("NARt"),R=n("qV6p"),I=n("GlmT"),j=n("Zcty"),D=n("rQKZ");function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function V(e,t,n,i,r,a,o){try{var l=e[a](o),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(i,r)}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function B(e,t,n){return t&&M(e.prototype,t),n&&M(e,n),e}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Z(e);if(t){var r=Z(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return q(this,n)}}function q(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?U(e):t}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var X=Object(l.connect)((function(e){return{liveData:e.get("liveData")}}))(i=Object(D.default)()(i=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(i,t);var n=z(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=n.call(this,e))._returnToProject=function(){return window.app.router.navigate("#/edit/".concat(t.state.infographicId))},t._handleOutlineStoreChange=t._handleOutlineStoreChange.bind(U(t)),t._handleSelectionFrameStoreChange=t._handleSelectionFrameStoreChange.bind(U(t)),t._handleSelectionFrameDownloadClick=t._handleSelectionFrameDownloadClick.bind(U(t)),t._revealSelectionFrame=t._revealSelectionFrame.bind(U(t)),t.state={hiddenElements:Object(o.fromJS)(v.default.readHiddenElements()),outlineVisible:v.default.isOutlineVisible()},t}return B(i,null,[{key:"getStores",value:function(){return[m.default,g.default,y.default,b.default,O.default]}},{key:"calculateState",value:function(){return{infographicModel:m.default.model,infographicId:m.default.infographicId,modelIsLoading:m.default.isLoading,canDownload:b.default.canDownload,transparentBackground:g.default.get("transparentBackground")&&S.TYPES_WITH_TRANSPARENCY.includes(O.default.activeTab),displayPaper:y.default.displayPaper,paperWidth:y.default.paperWidth,paperHeight:y.default.paperHeight,zoomRatio:y.default.zoomRatio,paperZoomRatio:y.default.paperZoomRatio,transformOriginX:y.default.transformOriginX,marginTop:y.default.marginTop,marginRight:y.default.marginRight,marginBottom:y.default.marginBottom,marginLeft:y.default.marginLeft}}}]),B(i,[{key:"render",value:function(){var e,t,n,i,r=this,o=this.state,l=o.transparentBackground,c=o.zoomRatio,u=o.displayPaper,f=o.paperZoomRatio,h=o.transformOriginX,m=o.paperWidth,g=o.paperHeight,v=o.selectionFrameVisible,y=o.selectionFramePosition,_=o.outlineVisible,b=o.marginTop,O=o.marginRight,S=o.marginBottom,E=o.marginLeft,L=l,x=s()(p.a.responsiveContainer,(H(e={},p.a.__transparentBackground,L),H(e,p.a.__paper,u),H(e,p.a.__transparentPaper,u&&L),e)),k={},R={};u&&(Object.assign(k,{transform:"scale(".concat(f,")"),width:"".concat(m,"px"),height:"".concat(g,"px")}),Object.assign(R,{transform:"scale(".concat(c,")"),transformOrigin:"".concat(h,"px 0px"),paddingTop:"".concat(b,"px"),paddingRight:"".concat(O,"px"),paddingBottom:"".concat(S,"px"),paddingLeft:"".concat(E,"px")}),t=f*m||void 0,n=f*g||void 0),void 0!==v&&_&&(i=a.a.createElement(C.default,{onLeave:w.default.hideSelectionFrame,position:y,visible:v,className:u?d.a.__onPaper:null},a.a.createElement("div",{className:d.a.elementToolbar},a.a.createElement("a",{className:d.a.downloadIcon,href:"",onClick:this._handleSelectionFrameDownloadClick}))));var I=_?a.a.createElement(F.default,null):null;return(a.a.createElement(T.default,{leftSidebar:I,ref:function(e){r._viewport=e},viewportWidth:t,viewportHeight:n,goBackToProject:this._returnToProject},a.a.createElement("div",{className:x,style:k,ref:function(e){r._viewportNode=e}},a.a.createElement("div",{ref:function(e){r._containerNode=e},style:R,className:p.a.responsiveContainerContents})),this.state.canDownload&&i))}},{key:"componentDidMount",value:function(){j.default.dispatch({type:I.LOAD_LIVE_DATA_ONCE}),this._updateContainerOffset();var e=this.state,t=e.modelIsLoading,n=e.infographicModel;v.default.addListener(this._handleOutlineStoreChange),_.default.addListener(this._handleSelectionFrameStoreChange),t||this._renderInfographic(n)}},{key:"componentWillUnmount",value:function(){this._clearInfographic(),_.default.removeListener(this._handleSelectionFrameStoreChange),v.default.removeListener(this._handleOutlineStoreChange)}},{key:"componentDidUpdate",value:function(e,t){var n=this,i=this.state,r=i.modelIsLoading,a=i.infographicModel,l=i.hiddenElements,c=i.outlineVisible;if(!r){var s=Promise.resolve();a===t.infographicModel&&e.liveData===this.props.liveData||(s=this._renderInfographic(a)),c===t.outlineVisible&&Object(o.is)(l,t.hiddenElements)||s.then((function(){n._currentView.setVisibilityOutline(v.default.getElements().toJS()),Object(E.default)(n._currentView.el.offsetHeight)})),function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];for(var a=0,l=i;a<l.length;a++){var c=l[a];if(!Object(o.is)(e[c],t[c]))return!0}return!1}(this.state,t,"displayPaper","paperWidth","paperHeight","paperZoomRatio")&&this._updateContainerOffset()}}},{key:"_renderInfographic",value:function(t){var n=this,i=new u.default(e.extend(!0,{},t.attributes));return this._renderPromise?this._renderPromise.then((function(){n._renderInfographic(i)})):this._renderPromise=new Promise(function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n._clearInfographic(),e.next=3,Object(k.default)(i);case 3:(r=document.createElement("div")).style.display="inline-block",n._containerNode.appendChild(r),a=new x.default({model:i,container:r,edit:!1,viewMode:"download",liveData:n.props.liveData}),n._currentView=a,a.render((function(){var e=a.el;Object(E.default)(e.offsetHeight),n._listenToInfographicHoverEvents(),r.parentNode.removeChild(r),requestAnimationFrame((function(){n._containerNode.appendChild(r),t()}))})),n._currentView.setVisibilityOutline(v.default.getElements().toJS());case 10:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function o(e){V(a,i,r,o,l,"next",e)}function l(e){V(a,i,r,o,l,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}()).then((function(){n._renderPromise=null})),this._renderPromise}},{key:"_handleOutlineStoreChange",value:function(){this.setState({hiddenElements:Object(o.fromJS)(v.default.readHiddenElements()),outlineVisible:v.default.isOutlineVisible()})}},{key:"_handleSelectionFrameStoreChange",value:function(){this.setState({selectionFrameVisible:_.default.isFrameVisible(),selectionFramePosition:_.default.getFramePosition()})}},{key:"_handleSelectionFrameDownloadClick",value:function(e){e.preventDefault(),Object(L.downloadSingleObject)()}},{key:"_listenToInfographicHoverEvents",value:function(){this._infographicElements=Array.from(this._containerNode.querySelectorAll(".moveable:not(.ig-theme-group-chart):not(.table-caption), .igc-chart.inner, .moveable > .map"));var e,t=A(this._infographicElements);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.classList.contains("chart-title")&&n.parentNode.classList.contains("chartcontainer")||n.addEventListener("mouseenter",this._revealSelectionFrame,!1)}}catch(e){t.e(e)}finally{t.f()}}},{key:"_revealSelectionFrame",value:function(e){var t=this.state.displayPaper,n=e.currentTarget,i=function(e){var t,n={};e.classList.contains("map")?t=".map":e.classList.contains("chart")?t=".moveable.chart":e.classList.contains("igc-chart")&&(t=".igc-chart.inner");if(t){var i=e.parentNode.querySelectorAll(t);n.childIndex=R.default.elementIndexInNodeList(e,i),n.objectType="chart"}else e.classList.contains("media")?n.objectType="media":n.objectType="particle";var r=R.default.findAncestorWithClassName(e,"moveable_w");if(!r)return null;return n.objectId=r.getAttribute("data-object-id"),n}(n);if(i){var r=n.getBoundingClientRect(),a=window.scrollY,o=i.objectId,l=i.objectType,c=i.childIndex,s=a+r.top-this._containerOffsetTop;t&&(s+=30),w.default.revealSelectionFrame(o,l,c,{top:s,left:r.left-this._containerOffsetLeft+this._viewport.scrollLeft,width:r.width,height:r.height})}}},{key:"_clearInfographic",value:function(){if(this._infographicElements){var e,t=A(this._infographicElements);try{for(t.s();!(e=t.n()).done;){e.value.removeEventListener("mouseenter",this._revealSelectionFrame,!1)}}catch(e){t.e(e)}finally{t.f()}this._infographicElements=null}this._currentView&&(this._currentView.remove(),this._currentView=null)}},{key:"_updateContainerOffset",value:function(){var e=this._viewportNode.getBoundingClientRect();this._containerOffsetTop=e.top+window.scrollY,this._containerOffsetLeft=e.left}}]),i}(r.Component))||i)||i;t.default=X}.call(this,n("+hRF"))},iqBm:function(e,t,n){"use strict";n.r(t),t.default='<% _.each(charts_data, function(data, idx) { %>\n<% if (showTitles) { %>\n<h2 class="moveable particle chart-title" style="margin-right:0px; margin-bottom:17px; margin-left:0px;"><div class="bodytitle"><div class="innertext"><%- titles[idx].contents %></div></div></h2>\n<% } %>\n<div class="moveable chart" id="chart_<%= id %>_<%= idx %>">\n  <div id="Chart_<%= id %>_<%= idx %>" class="inner"></div>\n</div>\n<% }); %>\n'},r87f:function(e,t,n){"use strict";n.r(t);var i=n("XzT5"),r=n("q1tI"),a=n.n(r),o=n("TSYQ"),l=n.n(o),c=n("LTYX"),s=n("SvMf"),u=n("FjIY"),f=n("OCsq"),d=n("/Wf7"),h=n.n(d);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=b(e);if(t){var r=b(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return _(this,n)}}function _(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(){return{elements:s.default.getElements(),selectAllChecked:s.default.allElementsChecked(),selectAllType:s.default.getAllCheckedType()}}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(d,e);var t,n,r,o=y(d);function d(){var e;m(this,d);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=o.call.apply(o,[this].concat(n))).state=O(),e._handleStoreChange=function(){e.setState(O())},e._handleElementCheckboxChange=function(e){var t=e.target,n=t.getAttribute("data-element-id");c.default.setElementVisible(n,t.checked)},e._handleChildCheckboxChange=function(e){var t=e.target,n=t.getAttribute("data-element-id"),i=t.getAttribute("data-index");c.default.setElementChildVisible(n,i,t.checked)},e._handleSelectAllChange=function(e){var t=e.target;c.default.toggleAllElementVisibility(t.checked)},e}return t=d,(n=[{key:"render",value:function(){var e=this.state,t=e.elements;return a.a.createElement(f.default,{title:i.default.t("app.download.outline_title"),selectAllChecked:e.selectAllChecked,selectAllType:e.selectAllType,onSelectAllChange:this._handleSelectAllChange},a.a.createElement("ul",{className:h.a.outlineList},t.map(function(e){var t,n=e.get("id"),i=e.get("children");!i.isEmpty()&&(t=a.a.createElement("ul",{className:l()(h.a.outlineList,h.a.__inner)},i.map(function(e,t){var i="outline-subitem-"+n+"-"+t;return(a.a.createElement("li",{className:h.a.outlineListItem,key:n+"-"+t},a.a.createElement(u.default,{checked:e.get("checked"),customCss:"vertical-align: middle","data-index":t,"data-element-id":n,disabled:e.get("disabled"),id:i,onChange:this._handleChildCheckboxChange,type:"check"}),a.a.createElement("label",{className:h.a.outlineLabel,htmlFor:i},e.get("title"))))}.bind(this))));var r="outline-item-"+n,o=[h.a.outlineListItem];return a.a.createElement("li",{className:o.join(" "),key:e.get("id")},a.a.createElement(u.default,{checked:e.get("checked"),customCss:"vertical-align: middle","data-element-id":n,id:r,onChange:this._handleElementCheckboxChange,type:e.get("checkType")}),a.a.createElement("label",{className:h.a.outlineLabel,htmlFor:r,title:e.get("title")},e.get("title")),t)}.bind(this))))}},{key:"componentDidMount",value:function(){s.default.addListener(this._handleStoreChange)}},{key:"componentWillUnmount",value:function(){s.default.removeListener(this._handleStoreChange)}}])&&g(t.prototype,n),r&&g(t,r),d}(a.a.Component);S.displayName="Outline",t.default=S},ulSj:function(e,t){e.exports={A3:{width:11.7,height:16.5},A4:{width:8.27,height:11.7},A5:{width:5.83,height:8.27},"US Letter":{width:8.5,height:11}}},wQZe:function(e,t,n){(t=e.exports=n("I1BE")(!1)).push([e.i,'._1mollFj5y9e4FDgS_04kFf._2sMyDpTBdBXk1FBPRkYPCr .ig-container {\n    background: transparent url("/i/chessboard-tile.jpg") repeat;\n}\n._1mollFj5y9e4FDgS_04kFf {\n    transform-origin: 0 0;\n}\n._1mollFj5y9e4FDgS_04kFf .ig-container {\n    top: 30px !important;\n}\n._1mollFj5y9e4FDgS_04kFf.FSwEI9Eus33aO5RecLzq5 {\n    display: inline-block;\n    overflow: hidden;\n    background: #FFF;\n}\n._1mollFj5y9e4FDgS_04kFf.FSwEI9Eus33aO5RecLzq5 .ig-container {\n    box-shadow: none;\n    top: 0 !important;\n}\n\n._1mollFj5y9e4FDgS_04kFf.FSwEI9Eus33aO5RecLzq5 {\n    display: inline-block;\n    overflow: hidden;\n    background: #FFF;\n}\n._1mollFj5y9e4FDgS_04kFf.tl6fgPNatLoPpXERQLtZX  {\n    background: transparent url("/i/chessboard-tile.jpg") repeat;\n}\n._1mollFj5y9e4FDgS_04kFf.tl6fgPNatLoPpXERQLtZX .ig-container {\n    background: transparent;\n}\n.LMMMrwozs1HN64EoqC-PW {\n    transform-origin: 50% 0;\n}\n',""]),t.locals={responsiveContainer:"_1mollFj5y9e4FDgS_04kFf",__transparentBackground:"_2sMyDpTBdBXk1FBPRkYPCr",__paper:"FSwEI9Eus33aO5RecLzq5",__transparentPaper:"tl6fgPNatLoPpXERQLtZX",responsiveContainerContents:"LMMMrwozs1HN64EoqC-PW"}}}]);