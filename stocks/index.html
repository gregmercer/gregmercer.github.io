<!doctype html>
<html ng-app>
<head>
   <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.8/angular.min.js"></script>
   <meta charset="utf-8">
   <meta http-equiv="Content-Type" content="text/html">
   <title>Stocks</title>
   <link rel="stylesheet" type="text/css" media="all" href="../css/styles.css">
</head>

<body ng-controller="StocksCtrl">

<form ng-submit="getGitInfo()" >
<div id="w" ng-init="getStockInfo();">
  <div ng-show="loaded">
    <div>
      <p><strong>Stock List:</strong></p>
      <ul ng-repeat="stock in stockList">
        <li>{{stock.name}} {{stock.symbol}}</li>
      </ul>
    </div>
  </div>
</div>

<script>
function StocksCtrl($scope, $http) {
  $scope.stockList = [
    {name: "Coca Cola", symbol: "KO"},
    {name: "Oracle", symbol: "ORCL"},
  ];
  var symbol = 'aapl';
  var url = 'http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.quotes%20where%20symbol%3D%22' + symbol + '%22&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=';
  $scope.getStockInfo = function () {
    console.log('in getStockInfo');
    $scope.loaded = true;
    $http.get({ method: "JSONP", url: url })
      .success(function (data) {
        console.log(data);
      })
      .error(function () {
        console.log('error');
      });
  }
}
</script>

</body>
</html>
